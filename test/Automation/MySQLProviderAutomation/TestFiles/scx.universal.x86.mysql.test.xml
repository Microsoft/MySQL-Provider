<?xml version="1.0" encoding="utf-8"?>
<varmap xmlns="http://smxinfranet/schemas/mcf/2002/01/varmap"
        assembly="..\MySQL.dll"
        dsc="MySQL Automation Test"
        owner="v-jeali" contact="v-jeali">

  <snippet id="MySQLInstallInfo">
    <rec key="MySQL.InstallCmd">sh /tmp/{0}</rec>
    <rec key="MySQL.VerifyFolderExistCmd"><![CDATA[/bin/ls /opt/microsoft/|grep -ic "MySQL";/bin/ls /var/opt/microsoft/|grep -ic "MySQL";/bin/ls /etc/opt/microsoft/|grep -ic "MySQL"]]></rec>
    <rec key="MySQL.VerifyMySQLInstalledCmd">dpkg -l |grep -i mysql-cimprov</rec>
  </snippet>
  <snippet id="LinuxInfo">
    <rec key="Linux.Host">m50p-ora5-01</rec>
  </snippet>
  <snippet id="MySQLAuthInfo">
    <rec key="MySQL.DefaultAuthCmd">/opt/microsoft/omi/bin/omicli iv root/mysql { MySQL_Server } UpdateCredentials { Port 3306 BindAddress 127.0.0.1 Username root Password OpsMgr2007R2 }</rec>
  </snippet>
  <snippet id="MultiMySQL">
    <rec key="MultiMySQLAddAuth">/opt/microsoft/omi/bin/omicli iv root/mysql { MySQL_Server } UpdateCredentials { Port 3306 BindAddress 127.0.0.1 Username root Password OpsMgr2007R2 };/opt/microsoft/omi/bin/omicli iv root/mysql { MySQL_Server } UpdateCredentials { Port 3307 BindAddress 127.0.0.1 Username root Password OpsMgr2007R2 }</rec>
  </snippet>
  <snippet id="CommonVariables">
    <rec key="IpAddress">[0-9]{0,3}.[0-9]{0,3}.[0-9]{0,3}.[0-9]{0,3}</rec>
    <rec key="Port">3306</rec>
    <rec key="ConfigurationFile">/etc/mysql/my.cnf</rec>
    <rec key="ErrorLogFile">/var/log/mysql/error.log</rec>
    <rec key="SocketFile">/var/run/mysqld/mysqld.sock</rec>
    <rec key="DataDirectory">/var/lib/mysql/</rec>
    <rec key="ProductVersion">5.0.96-community</rec>
    <rec key="Port_multi">3307</rec>
    <rec key="CollectionID">pc-linux-gnu</rec>
    <rec key="ConfigurationFile_multi">/etc/my.cnf</rec>
    <rec key="ErrorLogFile_multi_1">/usr/log/mysql/error1.log</rec>
    <rec key="ErrorLogFile_multi_2">/usr/log/mysql/error2.log</rec>
    <rec key="SocketFile_multi_1">/usr/local/mysql/mysql.sock1</rec>
    <rec key="SocketFile_multi_2">/usr/local/mysql/mysql.sock2</rec>
    <rec key="DataDirectory_multi_1">/usr/local/mysql/data/</rec>
    <rec key="DataDirectory_multi_2">/usr/local/mysql/data2/</rec>
  </snippet>

  <!-- 779296-VerifynonprivilegedAccountEnumeratedMySQL_Server -->
  <var set="1" lvl="0" vid="779296" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProvAuth" dsc="[MySQL]Verify the non-privileged account can enumerated for MySQL_Server" act="true">
    <snipref id="MySQLAuthInfo" />
    <rec key="addMySQLAuthCmd">/opt/microsoft/omi/bin/omicli iv root/mysql { MySQL_Server } UpdateCredentials { Port 3306 BindAddress 10.110.73.73 Username scxuser Password scxuser }</rec>
    <rec key="useNonSuperUser">true</rec>
    <rec key="mysqlCmd">/opt/microsoft/omi/bin/omicli ei root/mysql MySQL_Server</rec>
    <rec key="VerifyAuthFolderExistCmd">ls -al /var/opt/microsoft/mysql-cimprov/auth/|grep -ic scxuser</rec>
    <rec key="VerifyAuthFileProtectionCmd">ls -al /var/opt/microsoft/mysql-cimprov/auth/scxuser|grep -i mysql-auth</rec>
    <rec key="expectedAuthFolderCount">1</rec>
    <rec key="expectedAuthFileOwner">scxuser</rec>
    <rec key="expectedAuthFileProtection">-rw-------</rec>
    <rec key="expectedOperatingStatus">OperatingStatus=Insufficient Privileges</rec>
  </var>

  <!-- 779297-VerifyPrivilegedAccountEnumeratedMySQL_Server -->
  <var set="1" lvl="0" vid="779297" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProvAuth" dsc="[MySQL]Verify the privileged account can enumerated for MySQL_Server" act="true">
    <snipref id="MySQLAuthInfo" />
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <rec key="mysqlCmd">/opt/microsoft/omi/bin/omicli ei root/mysql MySQL_Server</rec>
    <rec key="VerifyAuthFolderExistCmd">ls -al /var/opt/microsoft/mysql-cimprov/auth/|grep -ic mysql-auth</rec>
    <rec key="VerifyAuthFileProtectionCmd">ls -al /var/opt/microsoft/mysql-cimprov/auth|grep -i mysql-auth</rec>
    <rec key="expectedAuthFolderCount">1</rec>
    <rec key="expectedAuthFileOwner">root</rec>
    <rec key="expectedAuthFileProtection">-rw-------</rec>
    <rec key="expectedOperatingStatus">OperatingStatus=OK</rec>
  </var>

  <!-- 727495-VerifyCimProvInstallationUsingOptionInstall -->
  <var set="1" lvl="0" vid="727495" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProv" dsc="[MySQL]Verify if install MySQL agent successfully with '--install' option" act="true">
    <snipref id="MySQLInstallInfo" />
    <rec key="mysqlCmd">sh /tmp/{0} --install</rec>
    <rec key="isInvalidInstall">false</rec>
    <rec key="verifyFolderExistCmd">%MySQL.VerifyFolderExistCmd%</rec>
    <!-- The mysql-cimprov folder under /opt/microsoft and /var/opt/microsoft and /etc/opt/microsoft should be 1,1,1 -->
    <rec key="expectedFolderCount">1,1,1</rec>
    <rec key="installLogKeyWorlds">done</rec>
    <rec key="verifyMySQLInstalledCmd">%MySQL.VerifyMySQLInstalledCmd%</rec>
  </var>

  <!-- 727742-VerifyCimProvInstallationUsingOptionInstallAndForce -->
  <var set="1" lvl="0" vid="727742" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProv" dsc="[MySQL]Verify if install MySQL agent successfully with '--install --force' option" act="true">
    <snipref id="MySQLInstallInfo" />
    <rec key="mysqlCmd">sh /tmp/{0} --install --force</rec>
    <rec key="isInvalidInstall">false</rec>
    <!-- The mysql-cimprov folder under /opt/microsoft and /var/opt/microsoft and /etc/opt/microsoft should be 1,1,1 -->
    <rec key="expectedFolderCount">1,1,1</rec>
    <rec key="installLogKeyWorlds">done</rec>
    <rec key="verifyFolderExistCmd">%MySQL.VerifyFolderExistCmd%</rec>
    <rec key="verifyMySQLInstalledCmd">%MySQL.VerifyMySQLInstalledCmd%</rec>
  </var>

  <!-- 727744-VerifyCimProvInstallationtwicefailed -->
  <var set="1" lvl="0" vid="727744" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProv" dsc="[MySQL]Verify if install an MySQL agent twice failed on the same version" act="true">
    <rec key="mysqlCmd">sh /tmp/{0} --install</rec>
    <rec key="isInvalidInstall">true</rec>
    <rec key="installTwice">true</rec>
  </var>

  <!-- 727503-VerifyCimProvInstallationUsingInvalidOptions-->
  <var set="1" lvl="0" vid="727503" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProv" dsc="[MySQL]Verify if install an MySQL agent failed with invalid option" act="true">
    <rec key="mysqlCmd">sh /tmp/{0} --invalidinstall</rec>
    <rec key="isInvalidInstall">true</rec>
  </var>

  <!-- 727504-VerifyCimProvInstallationWithOutOption -->
  <var set="1" lvl="0" vid="727504" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProv" dsc="[MySQL]Verify if install an MySQL agent failed without options" act="true">
    <rec key="mysqlCmd">sh /tmp/{0}</rec>
    <rec key="isInvalidInstall">true</rec>
    <rec key="installLogKeyWorlds">usage</rec>
  </var>

  <!-- 727498-VerifyCimProvUsingRemoveOption -->
  <var set="1" lvl="0" vid="727498" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProv" dsc="[MySQL]Verify if uninstall MySQL agent successfully with '--remove' option" act="true">
    <snipref id="MySQLInstallInfo" />
    <rec key="mysqlCmd">sh /tmp/{0} --remove</rec>
    <rec key="isRemoveOption">true</rec>
    <rec key="expectedFolderCount">0,0,0</rec>
    <rec key="verifyFolderExistCmd">%MySQL.VerifyFolderExistCmd%</rec>
    <rec key="verifyMySQLInstalledCmd">%MySQL.VerifyMySQLInstalledCmd%</rec>
  </var>

  <!-- 727499-VerifyCimProvUsingpurgeOption -->
  <var set="1" lvl="0" vid="727499" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProv" dsc="[MySQL]Verify if uninstalll MySQL agent cleanly with '--purge' option" act="true">
    <snipref id="MySQLInstallInfo" />
    <rec key="mysqlCmd">sh /tmp/{0} --purge</rec>
    <rec key="isRemoveOption">true</rec>
    <rec key="expectedFolderCount">0,0,0</rec>
    <rec key="verifyFolderExistCmd">%MySQL.VerifyFolderExistCmd%</rec>
    <rec key="verifyMySQLInstalledCmd">%MySQL.VerifyMySQLInstalledCmd%</rec>
  </var>

  <!-- 727500-VerifyCimProvHelpOption -->
  <var set="1" lvl="0" vid="727500" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProv" dsc="[MySQL]Verify if output the usage properly when type '--help' option" act="true">
    <rec key="mysqlCmd">sh /tmp/{0} --help</rec>
    <rec key="isHelpOption">true</rec>
  </var>

  <!-- 727741-VerifyCimProvUpgradeOption -->
  <var set="1" lvl="0" vid="727741" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProvCompatibility" dsc="[MySQL]Verify if upgrade MySQL agent successfully with '--upgrade' option" act="true">
    <rec key="installOlderMySQLCmd">sh /tmp/{0} --install</rec>
    <rec key="oldMySQLsLocation"><![CDATA[C:\MySQL\cimprov\old]]></rec>
    <rec key="mysqlCmd">sh /tmp/{0} --upgrade</rec>
    <rec key="isUpgrade">true</rec>
    <rec key="expectedFolderCount">1,1,1</rec>
    <rec key="verifyFolderExistCmd">%MySQL.VerifyFolderExistCmd%</rec>
    <rec key="verifyMySQLInstalledCmd">%MySQL.VerifyMySQLInstalledCmd%</rec>
  </var>

  <!-- 727743-VerifyCimProvUpgradeUsingForceOption -->
  <var set="1" lvl="0" vid="727743" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProvCompatibility" dsc="[MySQL]Verify if upgrade MySQL agent successfully with '--upgrade --force' option" act="true">
    <rec key="installOlderMySQLCmd">sh /tmp/{0} --install</rec>
    <rec key="oldMySQLsLocation"><![CDATA[C:\MySQL\cimprov\old]]></rec>
    <rec key="mysqlCmd">sh /tmp/{0} --upgrade --force</rec>
    <rec key="isUpgrade">true</rec>
    <rec key="expectedFolderCount">1,1,1</rec>
    <rec key="verifyFolderExistCmd">%MySQL.VerifyFolderExistCmd%</rec>
    <rec key="verifyMySQLInstalledCmd">%MySQL.VerifyMySQLInstalledCmd%</rec>
  </var>

  <!-- 727745-VerifyCimProvDoesNotUpgradeToLowerVersion-->
  <var set="1" lvl="0" vid="727745" cid="VerifyCimProv" cls="Scx.Test.MySQL.Provider.VerifyCimProv.VerifyCimProvCompatibility" dsc="[MySQL]Verify if upgrade MySQL agent successfully with '--upgrade --force' option" act="true">
    <rec key="oldMySQLsLocation"><![CDATA[C:\MySQL\cimprov\old]]></rec>
    <rec key="mysqlCmd">sh /tmp/{0} --upgrade</rec>
    <rec key="isUpgrade">false</rec>
  </var>

  <!-- VerifyEnumerate Test Case information -->
  <!-- Verify MySQL_Server works fine by comparing info from provider to wsman-->
  <var set="2" lvl="0" vid="728316" cid="MySQL_Server" cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="Verify MySQL_Server works fine by comparing info from provider to wsman." act="true">
    <snipref id="LinuxInfo" />
    <snipref id="MySQLAuthInfo" />
    <snipref id="CommonVariables" />
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <rec key="p:InstanceID">^$</rec>
    <rec key="p:Caption">^$</rec>
    <rec key="p:Description">^$</rec>
    <rec key="p:ElementName">^$</rec>
    <rec key="p:ProductIdentifyingNumber">[0-9]</rec>
    <rec key="p:ProductName">MySQL</rec>
    <rec key="p:ProductVendor">Oracle</rec>
    <rec key="p:ProductVersion">[0-9].[0-9].[0-9]+</rec>
    <rec key="p:SystemID">[0-9]</rec>
    <rec key="p:CollectionID">Linux</rec>
    <rec key="p:Name">^$</rec>
    <rec key="p:ConfigurationFile">%ConfigurationFile%</rec>
    <rec key="p:ErrorLogFile">%ErrorLogFile%</rec>
    <rec key="p:Hostname">%Linux.Host%</rec>
    <rec key="p:BindAddress">%IpAddress%</rec>
    <rec key="p:Port">%Port%</rec>
    <rec key="p:SocketFile">%SocketFile%</rec>
    <rec key="p:DataDirectory">%DataDirectory%</rec>
    <rec key="p:OperatingStatus">OK</rec>
  </var>

  <!-- Verify MySQL_Server_Database works fine by comparing info from provider to wsman-->
  <var set="2" lvl="0" vid="728331" cid="MySQL_ServerStatistics" cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="Verify MySQL_ ServerStatistics works fine by comparing info from provider to wsman" act="true">
    <snipref id="LinuxInfo" />
    <snipref id="CommonVariables" />
    <snipref id="MySQLAuthInfo"/>
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <rec key="p:InstanceID">%Linux.Host%:%IpAddress%:%Port%</rec>
    <rec key="p:CurrentNumConnections">[0-9]</rec>
    <rec key="p:MaxConnections">[0-9]</rec>
    <rec key="p:FailedConnections">[0-9]</rec>
    <rec key="p:Uptime">[0-9]</rec>
    <rec key="p:ServerDiskUseInBytes">[0-9]</rec>
    <rec key="p:ConnectionsUsePct">[0-9]</rec>
    <rec key="p:AbortedConnectionPct">[0-9]</rec>
    <rec key="p:SlowQueryPct">[0-9]</rec>
    <rec key="p:KeyCacheHitPct">[0-9]</rec>
    <rec key="p:KeyCacheWritePct">[0-9]</rec>
    <rec key="p:KeyCacheUsePct">[0-9]</rec>
    <rec key="p:QCacheHitPct">[0-9]</rec>
    <rec key="p:QCachePrunesPct">[0-9]</rec>
    <rec key="p:QCacheUsePct">[0-9]</rec>
    <rec key="p:TCacheHitPct">[0-9]</rec>
    <rec key="p:TableLockContentionPct">[0-9]</rec>
    <rec key="p:TableCacheUsePct">[0-9]</rec>
    <rec key="p:IDB_BP_HitPct">[0-9]</rec>
    <rec key="p:IDB_BP_WriteWaitPct">[0-9]</rec>
    <rec key="p:IDB_BP_UsePct">[0-9]</rec>
    <rec key="p:FullTableScanPct">[0-9]</rec>
  </var>

  <!-- Verify MySQL_Server_Database works fine by comparing info from provider to wsman-->
  <var set="2" lvl="0" vid="728336" cid="MySQL_Server_Database" cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="Verify MySQL_Server_Database works fine by comparing info from provider to wsman" act="true" permutation="rows">
    <snipref id="LinuxInfo" />
    <snipref id="CommonVariables" />
    <snipref id="MySQLAuthInfo"/>
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <recm key="p:InstanceID">
      <val>%Linux.Host%:%IpAddress%:%Port%:information_schema</val>
      <val>%Linux.Host%:%IpAddress%:%Port%:mysql</val>
      <val>%Linux.Host%:%IpAddress%:%Port%:performance_schema</val>
    </recm>
    <recm key="p:DatabaseName">
      <val>information_schema</val>
      <val>mysql</val>
      <val>performance_schema</val>
    </recm>
    <recm key="p:NumberOfTables">
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:DiskSpaceInBytes">
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
  </var>
  
  <!--Verify MySQL_Server works fine by comparing info from SQL commands to provider -->
  <var set="5" lvl="0" vid="728341" cid="MySQL_Server" cls="Scx.Test.MySQL.Provider.VerifyMySQLValue.VerifyMySQLValue" dsc="[MySQL]Verify MySQL_Server works fine by comparing info from SQL commands to provider" act="true">
    <snipref id="LinuxInfo"/>
    <snipref id="MySQLAuthInfo"/>
    <snipref id="CommonVariables"/>
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <rec key="ProductIdentifyingNumber">%Linux.Host%</rec>
    <rec key="ProductName">MySQL</rec>
    <rec key="ProductVendor">Oracle</rec>
    <rec key="ProductVersion">%ProductVersion%</rec>
    <rec key="ErrorLogFile">%ErrorLogFile%</rec>
    <rec key="Port">%Port%</rec>
    <rec key="SocketFile">%SocketFile%</rec>
    <rec key="DataDirectory">%DataDirectory%</rec>
  </var>
  
<!--Verify MySQL_ ServerStatistics works fine by comparing info from SQL commands to provider-->
  <var set="5" lvl="0" vid="728346" cid="MySQL_ServerStatistics" cls="Scx.Test.MySQL.Provider.VerifyMySQLValue.VerifyMySQLValue" dsc="Verify MySQL_ ServerStatistics works fine by comparing info from SQL commands to provider" act="true">
    <snipref id="LinuxInfo" />
    <snipref id="CommonVariables" />
    <snipref id="MySQLAuthInfo"/>
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <rec key="InstanceID">%Linux.Host%:%IpAddress%:%Port%</rec>
    <rec key="CurrentNumConnections">[0-9]</rec>
    <rec key="MaxConnections">[0-9]</rec>
    <rec key="FailedConnections">[0-9]</rec>
    <rec key="Uptime">[0-9]</rec>
    <rec key="ServerDiskUseInBytes">[0-9]</rec>
    <rec key="ConnectionsUsePct">[0-9]</rec>
    <rec key="AbortedConnectionPct">[0-9]</rec>
    <rec key="SlowQueryPct">[0-9]</rec>
    <rec key="KeyCacheHitPct">[0-9]</rec>
    <rec key="KeyCacheWritePct">[0-9]</rec>
    <rec key="KeyCacheUsePct">[0-9]</rec>
    <rec key="QCacheHitPct">[0-9]</rec>
    <rec key="QCachePrunesPct">[0-9]</rec>
    <rec key="QCacheUsePct">[0-9]</rec>
    <rec key="TCacheHitPct">[0-9]</rec>
    <rec key="TableLockContentionPct">[0-9]</rec>
    <rec key="TableCacheUsePct">[0-9]</rec>
    <rec key="IDB_BP_HitPct">[0-9]</rec>
    <rec key="IDB_BP_WriteWaitPct">[0-9]</rec>
    <rec key="IDB_BP_UsePct">[0-9]</rec>
    <rec key="FullTableScanPct">[0-9]</rec>
  </var>

  <!-- Verify MySQL_Server_Database works fine by comparing info from SQL commands to provider-->
  <var set="5" lvl="0" vid="728348" cid="MySQL_Server_Database" cls="Scx.Test.MySQL.Provider.VerifyMySQLValue.VerifyMySQLValue" dsc="Verify MySQL_Server_Database works fine by comparing info from SQL commands to provider" act="true" permutation="rows">
    <snipref id="LinuxInfo" />
    <snipref id="CommonVariables" />
    <snipref id="MySQLAuthInfo"/>
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <recm key="InstanceID">
      <val>%Linux.Host%:%IpAddress%:%Port%:employees</val>
      <val>%Linux.Host%:%IpAddress%:%Port%:information_schema</val>
      <val>%Linux.Host%:%IpAddress%:%Port%:mysql</val>
      <val>%Linux.Host%:%IpAddress%:%Port%:test</val>
    </recm>
    <recm key="DatabaseName">
      <val>employees</val>
      <val>information_schema</val>
      <val>mysql</val>
      <val>test</val>
    </recm>
    <recm key="NumberOfTables">
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="DiskSpaceInBytes">
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
  </var>

  <!--728898-Verify the enumeration of CIM instance info failed if mysql service is not running-->
  <var set="2" lvl="0" vid="728898" cid="MySQL_Server_Database" cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="Verify the enumeration of CIM instance info failed if mysql service is not running" act="true">
    <rec key="enumerateresult">false</rec>
    <rec key="stopServer">true</rec>
    <rec key="stopMySQLCmd">service mysql stop</rec>
  </var>

  <!-- 728899-Verify the property 'OperatingStatus' will be 'Authentication File in Error' when not set Credentials for MySQL instance -->
  <var set="2" lvl="0" vid="728899" cid="MySQL_Server" cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="Verify the property 'OperatingStatus' will be 'Authentication File in Error' when not set Credentials for MySQL instance" act="true">
    <snipref id="LinuxInfo" />
    <snipref id="CommonVariables" />
    <rec key="p:ProductIdentifyingNumber">%Linux.Host%:%IpAddress%:%Port%</rec>
    <rec key="p:ProductName">MySQL</rec>
    <rec key="p:ProductVendor">Oracle</rec>
    <rec key="p:ProductVersion">^$</rec>
    <rec key="p:SystemID">^$</rec>
    <rec key="p:CollectionID">^$</rec>
    <rec key="p:ConfigurationFile">%ConfigurationFile%</rec>
    <rec key="p:Hostname">%Linux.Host%</rec>
    <rec key="p:BindAddress">%IpAddress%</rec>
    <rec key="p:Port">%Port%</rec>
    <rec key="p:OperatingStatus">Authentication File in Error</rec>
  </var>

  <!-- 728900-MySQL_ServerStatistics:Verify the enumeration of CIM instance info failed if not set Credentials for MySQL instance-->
  <var set="2" lvl="0" vid="728900" cid="MySQL_ServerStatistics" cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="MySQL_ServerStatistics:Verify The enumeration of CIM instance info failed if not set Credentials for MySQL instance" act="true">
    <rec key="enumerateresult">false</rec>
  </var>

  <!--728901-MySQL_Server_Database:Verify the enumeration of CIM instance info failed if not set Credentials for MySQL instance-->
  <var set="2" lvl="0" vid="728901" cid="MySQL_Server_Database" cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="MySQL_Server_Database:Verify the enumeration of CIM instance info failed if not set Credentials for MySQL instance" act="true">
    <rec key="enumerateresult">false</rec>
  </var>
  
  <!--TestCase 728909 Verify provider works fine when multi mysql instances are configured-->
  <var set="2" lvl="0" vid="728909" cid="MySQL_Server" cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="[MySQL] Verify provider works fine when multi mysql instances are configured" act="true" permutation="rows">
    <snipref id="MultiMySQL"/>
    <snipref id="LinuxInfo" />
    <snipref id="CommonVariables"/>
    <snipref id="MySQLAuthInfo"/>
    <rec key="addMySQLAuthCmd">%MultiMySQLAddAuth%</rec>
    <recm key="p:ProductIdentifyingNumber">
      <val>%Linux.Host%:%IpAddress%:%Port%</val>
      <val>%Linux.Host%:%IpAddress%:%Port_multi%</val>
    </recm>
    <recm key="p:ProductName">
      <val>MySQL</val>
      <val>MySQL</val>
    </recm>
    <recm key="p:ProductVendor">
      <val>Oracle</val>
      <val>Oracle</val>
    </recm>
    <recm key="p:ProductVersion">
      <val>5.0.96-community</val>
      <val>5.0.96-community-log</val>
    </recm>
    <recm key="p:SystemID">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:CollectionID">
      <val>%CollectionID%</val>
      <val>%CollectionID%</val>
    </recm>
    <recm key="p:ConfigurationFile">
      <val>%ConfigurationFile_multi%</val>
      <val>%ConfigurationFile_multi%</val>
    </recm>
    <recm key="p:ErrorLogFile">
      <val>%ErrorLogFile_multi_1%</val>
      <val>%ErrorLogFile_multi_2%</val>
    </recm>
    <recm key="p:Hostname">
      <val>%Linux.Host%</val>
      <val>%Linux.Host%</val>
    </recm>
    <recm key="p:BindAddress">
      <val>%IpAddress%</val>
      <val>%IpAddress%</val>
    </recm>
    <recm key="p:Port">
      <val>%Port%</val>
      <val>%Port_multi%</val>
    </recm>
    <recm key="p:SocketFile">
      <val>%SocketFile_multi_1%</val>
      <val>%SocketFile_multi_2%</val>
    </recm>
    <recm key="p:DataDirectory">
      <val>%DataDirectory_multi_1%</val>
      <val>%DataDirectory_multi_2%</val>
    </recm>
    <recm key ="p:OperatingStatus">
      <val>OK</val>
      <val>OK</val>
    </recm>
  </var>
  
  <!--TestCase 728910 Verify provider works fine when multi mysql instances are configured-->
  <var set="2" lvl="0" vid="728910" cid="MySQL_ServerStatistics" cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="[MySQL] Verify provider works fine when multi mysql instances are configured" act="true" permutation="rows">
    <snipref id="MultiMySQL"/>
    <snipref id="LinuxInfo" />
    <snipref id="CommonVariables"/>
    <snipref id="MySQLAuthInfo"/>
    <rec key="addMySQLAuthCmd">%MultiMySQLAddAuth%</rec>
    <recm key="p:InstanceID">
      <val>%Linux.Host%:%IpAddress%:%Port%</val>
      <val>%Linux.Host%:%IpAddress%:%Port_multi%</val>
    </recm>
    <recm key="p:CurrentNumConnections">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:MaxConnections">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:FailedConnections">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:Uptime">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:ServerDiskUseInBytes">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:AbortedConnectionPct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:SlowQueryPct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:KeyCacheHitPct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:KeyCacheWritePct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:KeyCacheUsePct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:QCacheHitPct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:QCachePrunesPct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:QCacheUsePct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:TCacheHitPct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:TableLockContentionPct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:TableCacheUsePct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:IDB_BP_HitPct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:IDB_BP_WriteWaitPct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:IDB_BP_UsePct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:FullTableScanPct">
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
  </var>
  
  <!--TestCase 728911 Verify provider works fine when multi mysql instances are configured-->
  <var set="2" lvl="0" vid="728911" cid="MySQL_Server_Database" cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="[MySQL] Verify provider works fine when multi mysql instances are configured" act="true" permutation="rows">
    <snipref id="MultiMySQL"/>
    <snipref id="LinuxInfo" />
    <snipref id="CommonVariables" />
    <snipref id="MySQLAuthInfo"/>
    <rec key="addMySQLAuthCmd">%MultiMySQLAddAuth%</rec>
    <recm key="p:InstanceID">
      <val>%Linux.Host%:%IpAddress%:%Port%:employees</val>
      <val>%Linux.Host%:%IpAddress%:%Port%:information_schema</val>
      <val>%Linux.Host%:%IpAddress%:%Port%:mysql</val>
      <val>%Linux.Host%:%IpAddress%:%Port%:test</val>
      <val>%Linux.Host%:%IpAddress%:%Port_multi%:information_schema</val>
      <val>%Linux.Host%:%IpAddress%:%Port_multi%:mysql</val>
      <val>%Linux.Host%:%IpAddress%:%Port_multi%:test</val>
    </recm>
    <recm key="p:DatabaseName">
      <val>employees</val>
      <val>information_schema</val>
      <val>mysql</val>
      <val>test</val>
      <val>information_schema</val>
      <val>mysql</val>
      <val>test</val>
    </recm>
    <recm key="p:NumberOfTables">
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
    <recm key="p:DiskSpaceInBytes">
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
      <val>[0-9]</val>
    </recm>
  </var>
  
  <!-- Verify the property 'OperatingStatus' is ‘Insufficient Privileges ' when we using non-privileged account to query wsman-->
  <var set="2" lvl="0" vid="779298" cid="MySQL_Server" cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="Verify the property 'OperatingStatus' is ‘Insufficient Privileges ' when we using non-privileged account to query wsman" act="true">
    <snipref id="LinuxInfo" />
    <snipref id="MySQLAuthInfo" />
    <snipref id="CommonVariables" />
    <rec key="addMySQLAuthCmd">/opt/microsoft/omi/bin/omicli iv root/mysql { MySQL_Server } UpdateCredentials { Port 3306 BindAddress 10.110.73.73 Username scxuser Password scxuser }</rec>
    <rec key="useNonSuperUser">true</rec>
    <rec key="p:InstanceID">^$</rec>
    <rec key="p:Caption">^$</rec>
    <rec key="p:Description">^$</rec>
    <rec key="p:ElementName">^$</rec>
    <rec key="p:ProductIdentifyingNumber">%Linux.Host%:%IpAddress%:%Port%</rec>
    <rec key="p:ProductName">MySQL</rec>
    <rec key="p:ProductVendor">Oracle</rec>
    <rec key="p:ProductVersion">^$</rec>
    <rec key="p:SystemID">^$</rec>
    <rec key="p:CollectionID">^$</rec>
    <rec key="p:Name">^$</rec>
    <rec key="p:ConfigurationFile">%ConfigurationFile%</rec>
    <rec key="p:ErrorLogFile">^$</rec>
    <rec key="p:Hostname">%Linux.Host%</rec>
    <rec key="p:BindAddress">%IpAddress%</rec>
    <rec key="p:Port">%Port%</rec>
    <rec key="p:SocketFile">^$</rec>
    <rec key="p:DataDirectory">^$</rec>
    <rec key="p:OperatingStatus">Insufficient Privileges</rec>
  </var>
  <!--TestCase 728349 Verify the provider works fine after restart the scx agent-->
  <var set="2" lvl="0" vid="728349" cid="MySQL_Server"  cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="[MySQL]Verify the provider works fine after restart the scx agent" act="true">
    <snipref id="LinuxInfo" />
    <snipref id="MySQLAuthInfo" />
    <snipref id="CommonVariables" />
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <rec key="restartOmAgent">true</rec>
    <rec key="restartOmAgentCmd">scxadmin -restart</rec>
    <rec key="p:OperatingStatus">OK</rec>
  </var>
  <!--TestCase 728351 Verify the provider return failed message if omiserverd process not running-->
  <var set="2" lvl="0" vid="728351" cid="MySQL_Server"  cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="[MySQL]Verify the provider return failed message if omiserverd process not running" act="true">
    <snipref id="LinuxInfo" />
    <snipref id="MySQLAuthInfo" />
    <snipref id="CommonVariables" />
    <rec key="enumerateresult">false</rec>
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <rec key="stopOmAgent">true</rec>
    <rec key="stopOmAgentCmd">scxadmin -stop</rec>
  </var>
  <!--TestCase 728360 Verify provider works fine after restart mysql service-->
  <var set="2" lvl="0" vid="728360" cid="MySQL_Server"  cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="[MySQL]Verify provider works fine after restart mysql service" act="true">
    <snipref id="LinuxInfo" />
    <snipref id="MySQLAuthInfo" />
    <snipref id="CommonVariables" />
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <rec key="restartMySQLServer">true</rec>
    <rec key="restartMySQLCmd">service mysql restart</rec>
    <rec key="p:OperatingStatus">OK</rec>
  </var>
  <!--TestCase 728896 Verify the property 'OperatingStatus' will be 'No Contact' if mysql servive not running-->
  <var set="2" lvl="0" vid="728896" cid="MySQL_Server"  cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="[MySQL]Verify the property 'OperatingStatus' will be 'No Contact' if mysql servive not running" act="true">
    <snipref id="LinuxInfo" />
    <snipref id="MySQLAuthInfo" />
    <snipref id="CommonVariables" />
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <rec key="stopMySQLServer">true</rec>
    <rec key="stopMySQLCmd">service mysql stop</rec>
    <rec key="p:OperatingStatus">No Contact</rec>
  </var>
  <!--TestCase 728897 Verify the enumeration of CIM instance info failed if mysql service is not running-->
  <var set="2" lvl="0" vid="728897" cid="MySQL_ServerStatistics"  cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="[MySQL]Verify the enumeration of CIM instance info failed if mysql service is not running" act="true">
    <snipref id="LinuxInfo" />
    <snipref id="MySQLAuthInfo" />
    <snipref id="CommonVariables" />
    <rec key="enumerateresult">false</rec>
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <rec key="stopMySQLServer">true</rec>
    <rec key="stopMySQLCmd">service mysql stop</rec>
  </var>
  <!--TestCase 784102 Verify the enumeration not work after delete the authenticated credentials-->
  <var set="2" lvl="0" vid="784102" cid="MySQL_Server"  cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="[MySQL] Verify the enumeration not work after delete the authenticated credentials" act="true">
    <snipref id="LinuxInfo" />
    <snipref id="MySQLAuthInfo" />
    <snipref id="CommonVariables" />
    <rec key="enumerateresult">false</rec>
    <rec key="addMySQLAuthCmd">%MySQL.DefaultAuthCmd%</rec>
    <rec key="deleteCredentials">true</rec>
    <rec key="deleteCredentialsCmd">/opt/microsoft/mysql-cimprov/bin/mycimprovauth delete 3306</rec>
  </var>
  <!--TestCase 728903 Verify the enumeration still works fine after delete one credentials for multi mysql instances environment-->
  <var set="2" lvl="0" vid="728903" cid="MySQL_Server"  cls="Scx.Test.MySQL.Provider.VerifyEnumerate" dsc="[MySQL] Verify the enumeration still works fine after delete one credentials for multi mysql instances environment" act="true">
    <snipref id="MultiMySQL" />
    <snipref id="LinuxInfo" />
    <rec key="addMySQLAuthCmd">%MultiMySQLAddAuth%</rec>
    <snipref id="CommonVariables" />
    <rec key="deleteCredentials">true</rec>
    <rec key="deleteCredentialsCmd">/opt/microsoft/mysql-cimprov/bin/mycimprovauth delete 3307</rec>
    <rec key="p:OperatingStatus">OK</rec>
  </var>
  <!-- Test Variables Definition -->
  <grp cls="Scx.Test.MySQL.Provider.GroupHelper">
    <snipref id="LinuxInfo" />
    <rec key="hostname">%Linux.Host%</rec>
    <rec key="omserver">osst-w12r2-01</rec>
    <rec key="username">root</rec>
    <rec key="password">OpsMgr2007R2</rec>
    <rec key="nonsuperuser">scxuser</rec>
    <rec key="nonsuperuserpwd">scxuser</rec>
    <rec key="MySQLTag">universal.1.i686</rec>
    <rec key="InstallOMCmd">sh /tmp/{0} --install</rec>
    <rec key="UninstallOMCmd">sh /tmp/{0} --purge</rec>
    <rec key="CleanupOMCmd"><![CDATA[sh /tmp/{0} --purge;rm -rf /opt/microsoft;rm -rf /etc/opt/microsoft;rm -rf /var/opt/microsoft]]></rec>
    <rec key="installonly">false</rec>
    <rec key="knownIssueFormat">Known Issue: WI {0}: '{1}'</rec>
    <rec key="OMAgentLocation"><![CDATA[C:\Program Files\Microsoft System Center 2012 R2\Operations Manager\Server\AgentManagement\UnixAgents]]></rec>
    <!--cimprov-->
    <rec key="MySQLsLocation"><![CDATA[C:\MySQL\cimprov]]></rec>
    <rec key="installMySQLCmd">sh /tmp/{0} --install</rec>
    <rec key="UninstallMySQLCmd">sh /tmp/{0} --purge</rec>
    <rec key="CleanupMySQLCmd"><![CDATA[sh /tmp/{0} --purge;rm -rf /etc/opt/microsoft/mysql*;rm -rf /opt/microsoft/mysql*;rm -rf /var/opt/microsoft/mysql*;]]></rec>

    <!--check MySQL status-->
    <rec key="installMySQLPkg">yum install mysql</rec>
    <rec key="startMySQLCmd">service mysql start</rec>
    <rec key="stopMySQLCmd">service mysql stop</rec>
    <rec key="restartMySQLCmd">service mysql restart</rec>
    <rec key="checkServiceCmd">service mysql status</rec>
    <rec key="restartOmAgentCmd">scxadmin -restart</rec>
    <rec key="stopOmAgentCmd">scxadmin -stop</rec>
    <rec key="startOmAgentCmd">scxadmin -start</rec>
    <rec key="checkMySQLInstalled">dpkg -l |grep -i mysql</rec>

    <!-- Skip agent deployment: run WSMAN tests without attempting to install a new agent on the client machine, and don't uninstall the agent when testing is done-->
    <!--<rec key="skipagentdeploy">false</rec>-->
    <varref />
  </grp>
</varmap>